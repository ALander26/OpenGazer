#!/bin/bash
UNAME=$(uname)

# If the face shape predictor data does not exist, download and unzip it
if [ ! -f ./data/shape_predictor_68_face_landmarks.dat ]; then
    echo "Downloading the pre-trained face landmark detector..."
    curl -o ./data/shape_predictor_68_face_landmarks.dat.bz2 http://dlib.net/files/shape_predictor_68_face_landmarks.dat.bz2
    bzip2 -d ./data/shape_predictor_68_face_landmarks.dat.bz2
    echo "Done!"
fi

# If dlib does not exist in the data directory, download it
if [ ! -f ./data/dlib/setup.py ]; then
    curl -o ./data/dlib-18.18.zip http://dlib.net/files/dlib-18.18.zip
    cd data
    unzip ./dlib-18.18.zip
    mv ./dlib-18.18/ ./dlib
    cd ..
fi

if [ $UNAME = "Linux" ]; then
    qmake opengazer.pro
fi

if [ $UNAME = "Darwin" ]; then
    qmake -spec macx-g++ opengazer.pro
fi
